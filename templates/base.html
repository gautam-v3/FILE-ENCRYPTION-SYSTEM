<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{ title | default("SecureFiles") }}</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <!-- SweetAlert2 -->
  <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">

  <style>
    /* COLOR THEME */
    :root{
      --bg-1: #0f172a;       /* deep navy */
      --accent: #7c3aed;     /* purple */
      --accent-2: #06b6d4;   /* teal */
      --card: #ffffff;
      --muted: #94a3b8;
      --glass: rgba(255,255,255,0.06);
    }

    /* Page & typography */
    body {
      margin:0;
      font-family: Inter, "Segoe UI", Roboto, Arial, sans-serif;
      background: radial-gradient(1200px 400px at 10% 10%, rgba(124,58,237,0.10), transparent 8%),
                  radial-gradient(900px 300px at 88% 80%, rgba(6,182,212,0.06), transparent 8%),
                  linear-gradient(180deg, #fbfbfd 0%, #f5f7fb 100%);
      color: #0b1220;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* NAV */
    .navbar{
      background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.85));
      box-shadow: 0 6px 20px rgba(15,23,42,0.06);
      border-bottom-left-radius: 10px;
      border-bottom-right-radius: 10px;
    }
    .navbar-brand { font-weight:800; color:var(--bg-1); letter-spacing: -0.6px; }
    .nav-link { color: var(--muted); font-weight:600; }
    .nav-link:hover { color:var(--bg-1); }

    /* HERO */
    .hero {
      padding: 2.25rem;
      border-radius: 18px;
      background: linear-gradient(180deg, rgba(124,58,237,0.06), rgba(6,182,212,0.03));
      box-shadow: 0 18px 48px rgba(12,18,38,0.06);
      margin: 1.25rem 0;
      position: relative;
      overflow: hidden;
    }

    .hero .glow-dot {
      position:absolute;
      width: 220px;
      height: 220px;
      border-radius: 50%;
      filter: blur(40px);
      opacity: 0.45;
      transform: translate3d(0,0,0);
    }
    .hero .glow-dot.one{ top:-20px; left:-40px; background: linear-gradient(45deg,var(--accent), transparent);}
    .hero .glow-dot.two{ bottom:-40px; right:-40px; background: linear-gradient(45deg,var(--accent-2), transparent); opacity: .35;}

    .hero-title { font-size: clamp(1.6rem, 3.4vw, 2.8rem); font-weight:900; color:var(--bg-1); margin:0; letter-spacing:-0.6px;}
    .hero-sub { color: var(--muted); margin-top:0.6rem; margin-bottom:1rem; font-weight:600; }

    /* cards */
    .card-float {
      background: var(--card);
      border-radius: 14px;
      box-shadow: 0 14px 38px rgba(10,12,20,0.06);
      transition: transform .15s ease, box-shadow .15s ease;
      border: none;
    }
    .card-float:hover { transform: translateY(-6px); box-shadow: 0 24px 46px rgba(10,12,20,0.08); }

    /* file card */
    .file-card { border-left: 5px solid rgba(124,58,237,0.12); }

    /* buttons */
    .btn-accent {
      background: linear-gradient(90deg,var(--accent), #5b21b6);
      color:white;
      border: none;
      border-radius: 12px;
      padding: .5rem .9rem;
      font-weight:700;
      box-shadow: 0 8px 28px rgba(124,58,237,0.12);
      transition: transform .12s ease;
    }
    .btn-accent:hover { transform: translateY(-3px); }

    .btn-teal {
      background: linear-gradient(90deg,var(--accent-2), #0891b2);
      color:white;
      border:none;
      border-radius:12px;
      padding:.45rem .85rem;
      font-weight:700;
      box-shadow: 0 8px 28px rgba(6,182,212,0.10);
    }

    .btn-outline-danger-custom {
      color:#e11d48;
      border: 1px solid rgba(225,29,72,0.14);
      background: white;
      border-radius: 10px;
      padding: .35rem .7rem;
      font-weight:700;
    }

    /* small animations */
    .fade-up { animation: fadeUp .45s cubic-bezier(.2,.9,.3,1) both; }
    @keyframes fadeUp { from { opacity:0; transform: translateY(8px) } to { opacity:1; transform: translateY(0) } }

    .pulse {
      animation: pulseAccent 2.6s ease-in-out infinite;
      transform-origin:center;
    }
    @keyframes pulseAccent {
      0% { transform: scale(1); opacity:.9; }
      50% { transform: scale(1.04); opacity: .78; }
      100% { transform: scale(1); opacity:.9; }
    }

    /* upload progress */
    .progress-wrap { height: 9px; background: rgba(11,17,32,0.04); border-radius:999px; overflow:hidden; }
    .progress-bar-custom { height:9px; background: linear-gradient(90deg,#7c3aed,#06b6d4); width:0%; transition: width .16s linear; }

    footer { text-align:center; color:var(--muted); padding:2rem 0 1rem; font-size:0.9rem; margin-top:2rem; }

    /* responsive */
    @media (max-width:768px){
      .hero { padding:1.2rem; }
      .hero-title { font-size:1.35rem; }
    }
  </style>

  {% block head %}{% endblock %}
</head>
<body>
  <nav class="navbar navbar-expand-lg">
    <div class="container">
      <a class="navbar-brand" href="{{ url_for('index') }}">SecureFiles</a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMain">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navMain">
        <ul class="navbar-nav ms-auto align-items-center" style="gap:.6rem;">
          <li class="nav-item"><a class="nav-link" href="{{ url_for('index') }}">Upload</a></li>
          <li class="nav-item"><a class="nav-link" href="{{ url_for('list_files') }}">My Files</a></li>

          {% if current_user.is_authenticated %}
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="userMenu" data-bs-toggle="dropdown">{{ current_user.username }}</a>
              <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userMenu">
                <li><a class="dropdown-item" href="{{ url_for('list_files') }}">My Files</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="{{ url_for('logout') }}">Logout</a></li>
              </ul>
            </li>
          {% else %}
            <li class="nav-item"><a class="nav-link" href="{{ url_for('login') }}">Login</a></li>
            <li class="nav-item"><a class="btn btn-accent ms-2" href="{{ url_for('register') }}">Register</a></li>
          {% endif %}
        </ul>
      </div>
    </div>
  </nav>

  <main class="container my-4">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="mb-3">
          {% for category, message in messages %}
            {% set bs = 'info' %}
            {% if category == 'error' %}{% set bs = 'danger' %}{% endif %}
            {% if category == 'success' %}{% set bs = 'success' %}{% endif %}
            <div class="alert alert-{{ bs }} alert-dismissible fade show" role="alert">
              {{ message }}
              <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    {% block body %}{% endblock %}
  </main>

  <footer>SecureFiles â€” AES-GCM + RSA hybrid encryption</footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  {% block scripts %}{% endblock %}
</body>
</html>
